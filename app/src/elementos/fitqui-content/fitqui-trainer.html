<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="fitqui-controls.html">
<link rel="import" href="fitqui-trainer-details.html">

<dom-module id="fitqui-trainer">
  <template>
    <link rel="stylesheet" type="text/css" href="../../css/fitqui-app/fitqui-content/fitqui-trainer.css" inline>

    <template is="dom-if" if="{{!haDados}}">
      <div id="nao-ha-dados">
        <p>Opa, algo deu errado. Você chegou a selecionar os ítens?</p>
        <p>Se não, clique no botão abaixo para selecionar o tipo de exercício que você está procurando!</p>
        <paper-button on-tap="voltar" raised>Selecionar exercícios</paper-button>
      </div>
    </template>
    <template is="dom-if" if="{{haDados}}">
      <fitqui-trainer-details
        id="detalhes"
        programa="[[programa]]">
      </fitqui-trainer-details>
      <fitqui-controls id="controle" on-tap="controlTap"
        atual-exercicios={{posicao}}
        total-exercicios={{programa.length}}>
      </fitqui-controls>
    </template>
  </template>
  <script>
    Polymer({
      is: 'fitqui-trainer',
      properties: {
        programa: {
          type: Array,
          value: () => []
        },
        route: {
          type: Object
        },
        haDados: {
          type: Boolean,
          value: () => false,
          computed: 'computeHaDados(programa)'
        }
      },
      computeHaDados: function(programa){
        return (programa.length > 0 ? true : false);
      },
      voltar: function(){
        window.location.href = "#filters";
      },
      controlTap: function(evento,objeto){
        var botao = evento.path[0];
        switch (botao.id) {
          case "pause":
            console.log("pause");
            break;
          case "play":
            console.log("play");
            break;
          case "next":
            console.log("next");
            break;
          case "previous":
            console.log("previous");
            break;
          default:
            _fitqui.log("algo deu errado na função 'controlTap' no 'fitqui-trainer'.");
        }
      }
    });
  </script>
</dom-module>
