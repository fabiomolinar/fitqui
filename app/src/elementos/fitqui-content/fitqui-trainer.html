<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="fitqui-controls.html">

<dom-module id="fitqui-trainer">
  <template>
    <link rel="stylesheet" type="text/css" href="../../css/fitqui-app/fitqui-content/fitqui-trainer.css" inline>

    <div class="flex-row">
      <div class="programa">
        <h2></h2>
      </div>
      <!-- prop1 = container para propaganda 1 -->
      <div class="prop1">

      </div>
    </div>
    <fitqui-controls id="controle"
      atual-exercicios={{posicao}}
      total-exercicios={{programa.length}}>
    </fitqui-controls>

  </template>
  <script>
    Polymer({
      is: 'fitqui-trainer',
      properties: {
        programa: {
          type: Array,
          value: []
        },
        route: {
          type: Object
        },
        posicao: {
          type: Number,
          computed: 'computePosicao(route)'
        }
      },
      computePosicao: function(route){
        var path = route.path;
        var posicao = 1;
        var primeiro = path.indexOf("/");
        if (primeiro > -1){
          var ultimo = path.lastIndexOf("/");
          if (primeiro === ultimo){
            posicao = parseInt(path.substring(primeiro + 1,path.length));
          } else {
            posicao = parseInt(path.substring(primeiro + 1, ultimo + 1));
          }
        }
        if (!isNaN(posicao)){
          return posicao;
        } else {
          return 1;
        }
      }
    });
  </script>
</dom-module>
