<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-fab-speed-dial/paper-fab-speed-dial.html">
<link rel="import" href="../../bower_components/paper-fab-speed-dial/paper-fab-speed-dial-action.html">
<link rel="import" href="../../bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-range-slider/paper-range-slider.html">
<link rel="import" href="../../bower_components/gold-email-input/gold-email-input.html">
<link rel="import" href="../../bower_components/paper-input/paper-textarea.html">
<link rel="import" href="../../bower_components/neon-animation/neon-animation.html">
<link rel="import" href="../../bower_components/iron-form/iron-form.html">
<link rel="import" href="fitqui-icones.html">
<link rel="impoer" href="fitqui-shared-styles.html">

<dom-module id="fitqui-buttons-menu">
  <template>
    <style include="fitqui-shared-styles"></style>
    <link rel="stylesheet" type="text/css" href="../css/fitqui-app/fitqui-buttons-menu.css" inline>

    <paper-fab-speed-dial id="botoes">
      <paper-fab-speed-dial-action icon="icones:bug-report" on-tap="tapMensagem">Reportar um erro</paper-fab-speed-dial-action>
      <paper-fab-speed-dial-action icon="icones:thumbs-up-down" on-tap="tapOpiniao">Dê-nos sua opinião</paper-fab-speed-dial-action>
      <paper-fab-speed-dial-action icon="icones:email" on-tap="tapMensagem">Contate-nos</paper-fab-speed-dial-action>
    </paper-fab-speed-dial>

    <paper-dialog
      id="mensagem"
      class="dialogos"
      modal
      entry-animation="scale-up-animation">
      <h2 hidden$="{{mandarEmail}}">Reporte um erro</h2>
      <h2 hidden$="{{mandarErro}}">Entre em contato</h2>
      <iron-form class="" action="index.html" method="post">
        <div>
          <gold-email-input
            label="Seu email"
            required
            auto-validate>
            <iron-icon icon="icones:email" prefix></iron-icon>
          </gold-email-input>
          <paper-textarea
            id="texto"
            label="Deixe sua mensagem"
            auto-validate
            required
            charCounter
            minlength="10"
            maxRows="10"
            rows="3">
          </paper-textarea>
          <div class="botoesDialogo">
            <paper-button class="botao-verde" autofocus on-tap="enviarMensagem">Enviar</paper-button>
            <paper-button class="botao-vermelho" autofocus on-tap="cancelarMensagem">Cancelar</paper-button>
          </div>
        </div>
      </iron-form>
    </paper-dialog>
    <paper-dialog
      id="avaliar"
      class="dialogos"
      modal
      entry-animation="scale-up-animation">
      <h2>Avalie-nos</h2>
      <iron-form>
        <div>
          <paper-textarea
            label="Onde precisamos melhorar?"
            charCounter
            maxRows="10"
            rows="3">
          </paper-textarea>
          <paper-textarea
            label="O que você gostou?"
            charCounter
            maxRows="10"
            rows="3">
          </paper-textarea>
          <p>Em uma escale de 0 a 10, que nota você nos daria?</p>
          <paper-range-slider
            id="nota"
            single-slider
            min="0"
            max="10"
            value-max="5"
            always-show-pin>
          </paper-range-slider>
          <div class="botoesDialogo">
            <paper-button class="botao-verde" autofocus on-tap="enviarMensagem">Enviar</paper-button>
            <paper-button class="botao-vermelho" autofocus on-tap="cancelarMensagem">Cancelar</paper-button>
          </div>
        </div>
      </iron-form>
    </paper-dialog>

  </template>
  <script>
    Polymer({
      is: 'fitqui-buttons-menu',
      properties: {
        mandarErro: {
          type: Boolean,
          value: () => false,
          observer: 'changedTipoDialogo'
        },
        mandarEmail: {
          type: Boolean,
          value: () => false,
          observer: 'changedTipoDialogo'
        }
      },
      changedTipoDialogo: function(){
        this.$.texto.value = "";
      },
      tapMensagem: function(evento,objeto) {
        var botao = objeto.sourceEvent.path[0]._iconName;
        if (botao === "bug-report") {
          this.mandarErro = true;
          this.mandarEmail = false;
          this.$.mensagem.open();
        } else if (botao === "email") {
          this.mandarErro = false;
          this.mandarEmail = true;
          this.$.mensagem.open();
        }
        this.$.botoes.close();
      },
      tapOpiniao: function() {
        this.$.avaliar.open();
        this.$.nota.setAttribute("style","width:100%");
        this.$.botoes.close();
      },
      enviarMensagem: function(evento,objeto) {

      },
      cancelarMensagem: function(evento,objeto) {
        var paths = objeto.sourceEvent.path;
        for (var i = 0; i < paths.length; i++) {
          if (paths[i].tagName === "PAPER-DIALOG") {
            var dialogo = paths[i];
            break;
          }
        }
        dialogo.close();
      }
    });
  </script>
</dom-module>
